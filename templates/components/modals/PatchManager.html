<div class="modal fade" id="patchManagerModal" tabindex="-1">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content bg-dark text-white border-secondary">
            
            <div class="modal-header border-secondary">
                <h5 class="modal-title text-uppercase fw-bold text-warning">
                    <i class="bi bi-cpu me-2"></i>System Patch Manager
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            
            <div class="modal-body">
                
                <div class="alert alert-info d-flex align-items-center mb-3">
                    <i class="bi bi-info-circle-fill me-2 fs-4"></i>
                    <div>
                        <strong>Current Version:</strong> <span id="pmCurrentVersion" class="fw-bold text-white">Loading...</span><br>
                        <span class="small">Applying a patch will create a full backup and restart the server.</span>
                    </div>
                </div>

                <ul class="nav nav-tabs border-secondary mb-3" id="patchTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active text-white" id="upload-tab" data-bs-toggle="tab" data-bs-target="#pmUpload" type="button">Upload File</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link text-white" id="manual-tab" data-bs-toggle="tab" data-bs-target="#pmManual" type="button">Manual Input</button>
                    </li>
                </ul>

                <div class="tab-content">
                    
                    <div class="tab-pane fade show active" id="pmUpload">
                        <div class="mb-3">
                            <label class="form-label text-muted small text-uppercase fw-bold">Select Patch File (.json)</label>
                            <input class="form-control bg-black text-white border-secondary" type="file" id="pmFile" accept=".json">
                        </div>
                    </div>

                    <div class="tab-pane fade" id="pmManual">
                        <div class="mb-3">
                            <label class="form-label text-muted small text-uppercase fw-bold">Paste JSON Patch Content</label>
                            <textarea class="form-control bg-black text-warning border-secondary font-monospace small" id="pmContent" rows="10" placeholder='{
    "blueprints/MyFile.py": {
        "block_id": "    def new_code():\n        pass"
    }
}'></textarea>
                        </div>
                    </div>

                </div>

                <div id="pmLogArea" class="mt-3 p-2 bg-black border border-secondary rounded font-monospace small text-success" style="height: 150px; overflow-y: auto; display: none; white-space: pre-wrap;"></div>

            </div>
            
            <div class="modal-footer border-secondary">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-warning fw-bold" onclick="pmApplyPatch()">
                    <i class="bi bi-lightning-charge-fill me-1"></i>APPLY PATCH
                </button>
            </div>

        </div>
    </div>
</div>