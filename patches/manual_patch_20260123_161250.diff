--- a/blueprints/AlterDatabaseFields.py
+++ b/blueprints/AlterDatabaseFields.py
@@ -112,17 +112,17 @@
     save_config({'renames': renames, 'adds': new_fields})
 
     try:
-        with db.session.begin():
-            for old, new in renames.items():
-                if old != new:
-                    chk = text(f"SELECT 1 FROM sys.columns WHERE Name=:o AND Object_ID=Object_ID(N'GenericDataImport')")
-                    if db.session.execute(chk, {'o': old}).fetchone():
-                        db.session.execute(text(f"EXEC sp_rename 'GenericDataImport.{old}', '{new}', 'COLUMN'"))
-            for f in new_fields:
-                name, ftype = f['name'], f['type']
-                chk = text(f"SELECT 1 FROM sys.columns WHERE Name=:n AND Object_ID=Object_ID(N'GenericDataImport')")
-                if not db.session.execute(chk, {'n': name}).fetchone():
-                    db.session.execute(text(f"ALTER TABLE GenericDataImport ADD [{name}] {ftype}"))
+        for old, new in renames.items():
+            if old != new:
+                chk = text(f"SELECT 1 FROM sys.columns WHERE Name=:o AND Object_ID=Object_ID(N'GenericDataImport')")
+                if db.session.execute(chk, {'o': old}).fetchone():
+                    db.session.execute(text(f"EXEC sp_rename 'GenericDataImport.{old}', '{new}', 'COLUMN'"))
+        
+        for f in new_fields:
+            name, ftype = f['name'], f['type']
+            chk = text(f"SELECT 1 FROM sys.columns WHERE Name=:n AND Object_ID=Object_ID(N'GenericDataImport')")
+            if not db.session.execute(chk, {'n': name}).fetchone():
+                db.session.execute(text(f"ALTER TABLE GenericDataImport ADD [{name}] {ftype}"))
+        
+        db.session.commit()
         return jsonify({'success': True, 'message': "Schema updated successfully."})
     except Exception as e:
         return jsonify({'success': False, 'message': str(e)})